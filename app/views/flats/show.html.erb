<h1><%= @flat.title %></h1>
<%= image_tag @flat.picture.url(:medium) %>
<br>
  <li>Description: <%= @flat.description %></li>
  <li><%= @flat.price_per_night %>â‚¬ / night</li>
  <li><%= @flat.capacity %> persons</li>
  <li>Address: <%= @flat.address %>, <%= @flat.city %></li>
  <div class="container">
        <div id="map" style='width: 400px; height: 400px'></div>

        <% content_for(:after_js) do %>
          <script type="text/javascript">
            $(document).on('ready', function() {
              handler = Gmaps.build('Google');
              handler.buildMap({ internal: { id: 'map' } }, function(){
                markers = handler.addMarkers(<%= raw @markers.to_json %>);
                handler.bounds.extendWith(markers);
                handler.fitMapToBounds();
                handler.getMap().setZoom(12);
              });
            })
          </script>
        <% end %>
      </div>
  <br>
</ul>

<p><%= link_to "Back to Search results", flats_path %></p>

<h2>Book</h2>
  <%= simple_form_for [@flat, @booking] do |f| %>
    <%= f.error_notification %>

    <%= f.input :nb_travelers %>
    <%= f.input :start_date %>
    <%= f.input :end_date %>
    <%= f.input :message %>

    <%= f.submit "Book", class: "btn btn-success btn-lg" %>
  <% end %>
