<div class="container">
    <div class= "white_card">
      <h1>My Profile</h1>

      <p><%= link_to "Edit Profile", edit_user_registration_path, class: "btn btn-success" %></p>
  <br>

      <p>Email: <%= current_user.email %></p>
      <p>First name: <%= current_user.first_name %></p>
      <p>Last name: <%= current_user.last_name %></p>

      <%= image_tag current_user.picture.url(:medium) %>
  <br>
      <p>Email: <%= current_user.email %></p>
      <p>Profile created at: <%= current_user.created_at %></p>

      <br>
      <p><%= link_to "Go to My Bookings", bookings_path %></p>

  <br>
  <br>
    </div>
</div>

<div class="container">
    <div class= "white_card">

      <h2>My Flats</h2>
      <br>
      <br>
      <% @my_flats.each do |flat| %>

        <p><%= image_tag flat.picture.url(:thumb) %></p>
        <h3><%= link_to flat.title, my_flat_flat_path(flat) %></h3>
        <p><%= flat.city %></p>
        <p><%= flat.description %>, <%= flat.price_per_night %>â‚¬ / night, <%= flat.capacity %> persons</p>
        <p><%= link_to "edit", edit_flat_path(flat) %>
        <%= link_to "delete", flat_path(flat),
          method: :delete,
          data: { confirm: "Are you sure?" } %>
        </p>
        <br>
        <br>
      <% end %>

        <div id="map" style='width: 400px; height: 400px'></div>

        <% content_for(:after_js) do %>
          <script type="text/javascript">
            $(document).on('ready', function() {
              handler = Gmaps.build('Google');
              handler.buildMap({ internal: { id: 'map' } }, function(){
                markers = handler.addMarkers(<%= raw @markers.to_json %>);
                handler.bounds.extendWith(markers);
                handler.fitMapToBounds();
                handler.getMap().setZoom(12);
              });
            })
          </script>
        <% end %>

      <br>
      <p><%= link_to "Add a new flat", new_flat_path, class: "btn btn-success" %></p>

    </div>
</div>
